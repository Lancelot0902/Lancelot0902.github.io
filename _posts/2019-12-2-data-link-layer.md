---
title: data link layer
date: 2019-12-2 12:30:00 +0800
categories: [computer network, chapter 3]
tags: [data link layer]
---
### 数据链路层概述
数据链路层作用：为网络层提供服务，将源机器的网络层数据可靠的运输到目标机器的网络层

#### 链路和数据链路
* 链路 ：从一个结点到相邻结点的一般物理链路
* 数据链路 ：在一条线路上传输数据时，除必须有一条物理线路外，还必须有通信协议来控制数据的传输，把实现这些协议的硬件和软件加到链路上就构成了数据链路

#### 数据链路层使用的信道
* 点对点信道
* 广播信道

### 数据链路层的三个基本问题 ( 使用点对点信道 )
#### 封装成帧
**帧** 是点对点信道的数据链路层的协议单元
在IP数据报分别添加首部 ( SOH ) 和尾部 ( EOH ) 形成帧，这样在收到物理层上交的比特流后能识别IP数据报的开始和结束 ( 帧定界 )，为了提高帧的传输效率，应使帧的数据部分的长度尽可能大于首部和尾部

#### 透明传输
对数据报中可能出现的SOH和EOH，使它们不被解释为控制字符，对数据部分出现的SOH和EOH前面加上转义字符 ‘ESC’、

#### 差错检测
传输差错分为两类
* 比特差错 ( 0变1,1变0 )
* 帧丢失、重复、失序

检测方法 ：CRC循环冗余检验

数据链路层可靠传输的机制 ：
* 确认
* 超时重传

### 点对点协议 PPP
客户机需要 ISP才能接入到网络，PPP协议就是用户计算机和ISP进行通信时所使用的协议

#### PPP协议组成
* 一个将IP数据报封装到串行链路的方法
* 一个用来建立、配置和测试数据链路连接的链路控制协议LCP
* 一套网络控制协议 NCP

#### 零比特填充
发送端只要发现有5个连续的1，就立即填入一个0，接收端发现5个连续1时，就把后面的一个0删除

#### PPP工作状态图
![](https://img-blog.csdnimg.cn/20191202185406186.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xhbmNlbG90MDkwMg==,size_16,color_FFFFFF,t_70)

### 广播信道
局域网使用的就是广播信道，局域网可按网络拓扑进行分类：
* 星形网
* 环形网
* 总线网

计算机通过适配器 ( 网卡 ) 和局域网通信

#### 集线器
以太网使用集线器作为转发的中间节点

集线器工作在物理层；使用集线器的以太网在物理上是星型网，但是在逻辑上是总线型的，所以在同一时刻最多允许一个站发送消息

#### CSMA/CD协议 ( 载波监听/多点接入/碰撞技术 )
总线上只要有一台计算机在发送数据，总线的资源就被占用，该协议协调总线上各计算机的工作，使用CSMA/CD协议的以太网只能进行半双工通信

工作原理 ：先听先发、边听边发、冲突停止、时延重发

#### 以太网交换机
使用以太网交换机不仅能在数据链路层扩展以太网，而且以太网交换机的实质是一个多接口网桥，相互通信的主机都是独占传输媒体，无碰撞的传输数据